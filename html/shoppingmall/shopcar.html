<!DOCTYPE html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0, minimum-scale=1.0">
	<title>购物车</title>
	<script src="../../js/lib/rem.js" type="text/javascript" charset="utf-8"></script>
	<link rel="stylesheet" href="../../css/common/reset.css">
	<link rel="stylesheet" href="../../css/common/common.css">
	<link rel="stylesheet" type="text/css" href="../../css/private/shopcar.css"/>
	
</head>
<body>
<div class="screen">
	<header>
		<h1>购物车</h1>
		<a class="u_edit" id="scDele" href="#">编辑</a>
		<a class="u_edit" id="scSucc" href="#">完成</a>
	</header>
	<div class="main">
		<div class="sc_shangpin_wrap sub_center">
			<ul>
				<li>
					<input type="checkbox" class="sub_center_chec checkAll">
					<a href="shopDetails.html">
						<div class="sub_li_left">
							<img src="../../images/img25.png"/>
						</div>
						<div class="sub_li_right">
							<p>凌风牌 — 山地自行车四件套（送铃铛、挡雨板、雨衣、车灯）</p>
							<p><span>颜色：</span><span>白色</span>&nbsp;&nbsp;<span>尺码：</span><span>38</span>&nbsp;&nbsp;<span>容量：</span><span>25</span><span>ml</span></p>
							<p>
								<b><i class="shopPrice">2925</i><i>三界石</i></b>
								<em class="jiajian">
									<span class="oper jia_up" title="减一">-</span>
								 	<input type="number" name="" class="onub" value="1" />
								 	<span class=".oper jian_next" title="加一">+</span>
								</em>
							</p>
						</div>
					</a>
				</li>
				<li>
					<input type="checkbox" class="sub_center_chec checkAll">
					<a href="shopDetails.html">
						<div class="sub_li_left">
							<img src="../../images/img25.png"/>
						</div>
						<div class="sub_li_right">
							<p>凌风牌 — 山地自行车四件套（送铃铛、挡雨板、雨衣、车灯）</p>
							<p><span>颜色：</span><span>白色</span>&nbsp;&nbsp;<span>尺码：</span><span>38</span>&nbsp;&nbsp;<span>容量：</span><span>25</span><span>ml</span></p>
							<p>
								<b><i class="shopPrice">2925</i><i>三界石</i></b>
								<em class="jiajian">
									<span class="oper jia_up" title="减一">-</span>
								 	<input type="number" name="" class="onub" value="1" />
								 	<span class=".oper jian_next" title="加一">+</span>
								</em>
							</p>
						</div>
					</a>
				</li>
				<li>
					<input type="checkbox" class="sub_center_chec checkAll">
					<a href="shopDetails.html">
						<div class="sub_li_left">
							<img src="../../images/img25.png"/>
						</div>
						<div class="sub_li_right">
							<p>凌风牌 — 山地自行车四件套（送铃铛、挡雨板、雨衣、车灯）</p>
							<p><span>颜色：</span><span>白色</span>&nbsp;&nbsp;<span>尺码：</span><span>38</span>&nbsp;&nbsp;<span>容量：</span><span>25</span><span>ml</span></p>
							<p>
								<b><i class="shopPrice">2925</i><i>三界石</i></b>
								<em class="jiajian">
									<span class="oper jia_up" title="减一">-</span>
								 	<input type="number" name="" class="onub" value="1" />
								 	<span class=".oper jian_next" title="加一">+</span>
								</em>
							</p>
						</div>
					</a>
				</li>
				<li>
					<input type="checkbox" class="sub_center_chec checkAll">
					<a href="shopDetails.html">
						<div class="sub_li_left">
							<img src="../../images/img25.png"/>
						</div>
						<div class="sub_li_right">
							<p>凌风牌 — 山地自行车四件套（送铃铛、挡雨板、雨衣、车灯）</p>
							<p><span>颜色：</span><span>白色</span>&nbsp;&nbsp;<span>尺码：</span><span>38</span>&nbsp;&nbsp;<span>容量：</span><span>25</span><span>ml</span></p>
							<p>
								<b><i class="shopPrice">2925</i><i>三界石</i></b>
								<em class="jiajian">
									<span class="oper jia_up" title="减一">-</span>
								 	<input type="number" name="" class="onub" value="1" />
								 	<span class=".oper jian_next" title="加一">+</span>
								</em>
							</p>
						</div>
					</a>
				</li>
				<li>
					<input type="checkbox" class="sub_center_chec checkAll">
					<a href="shopDetails.html">
						<div class="sub_li_left">
							<img src="../../images/img25.png"/>
						</div>
						<div class="sub_li_right">
							<p>凌风牌 — 山地自行车四件套（送铃铛、挡雨板、雨衣、车灯）</p>
							<p><span>颜色：</span><span>白色</span>&nbsp;&nbsp;<span>尺码：</span><span>38</span>&nbsp;&nbsp;<span>容量：</span><span>25</span><span>ml</span></p>
							<p>
								<b><i class="shopPrice">2925</i><i>三界石</i></b>
								<em class="jiajian">
									<span class="oper jia_up" title="减一">-</span>
								 	<input type="number" name="" class="onub" value="1" />
								 	<span class=".oper jian_next" title="加一">+</span>
								</em>
							</p>
						</div>
					</a>
				</li>
			</ul>
		</div>
	</div>
	<div class="sc_bottom">
		<div class="sc_bottom_left">
			<label for="u_checkbox"><input id="u_checkbox" type="checkbox">全选</label>
		</div>
		<div class="sc_bottom_center">
			<p>
				<span>合计：</span>
				<i id="shopNumber">0</i>
				<span>三界石</span>
			</p>
			<li>
				不含运费
			</li>
		</div>
		<button class="sc_bottom_right fun_jiesuan" onclick="window.location.href='suborders.html'">
			去结算
		</button>
		<button class="sc_bottom_right fun_shanchu">
			删除
		</button>
	</div>
	<footer>
		<ul>
			<li>
				<a href="mallIndex.html">
					<div><img src="../../images/shouye-ct.png" alt=""></div>
					<p>合链商城</p>
				</a>				
			</li>
			<li>
				<a href="#">
					<div><img src="../../images/weilaishenghuo-ct.png" alt=""></div>
					<p>三界本地</p>
				</a>				
			</li>
			<li>
				<a href="../center/customerservice.html">
					<div><img src="../../images/kefu-ct.png" alt=""></div>
					<p>客服</p>
				</a>				
			</li>
			<li class="nowpage">
				<a href="shopcar.html">
					<div><img src="../../images/gouwuche-xz.png" alt=""></div>
					<p>购物车</p>
				</a>				
			</li>
			<li>
				<a href="../center/center.html">
					<div><img src="../../images/gerenzhongxin-ct.png" alt=""></div>
					<p>我的</p>
				</a>				
			</li>
		</ul>
	</footer>
</div>
<div class="sr_model_wrap fun_model_wrap_al">
	<div class="sr_model_wrap1">
		<div class="sr_model">
			你确定要删除这<span id="srModelNub">0</span>商品么？
		</div>
		<li class="sr_model_sub_wrap">
			<button id="dele_shanchu">
				取消
			</button>
			<button id="funSure">
				确定
			</button>
		</li>
	</div>
</div>
<script type="text/javascript" src="../../js/lib/zepto.min.js"></script>
<script type="text/javascript" src="../../js/lib/fastclick.js"></script>
<script>
	/*fastclick解决移动端点击延迟的问题*/
	$(document).ready(function() {
		if ('addEventListener' in document) {
		    document.addEventListener('DOMContentLoaded', function() {
		        FastClick.attach(document.body);
		    }, false);
		}
		$("#scDele").click(function(){
			$("#scDele").css("display","none");
			$("#scSucc").css("display","block");
			$(".fun_jiesuan").css("display","none");
			$(".fun_shanchu").css("display","block");
			eaShuaxin()
			return false;
		})
		$("#scSucc").click(function(){
			$("#scSucc").css("display","none");
			$("#scDele").css("display","block");
			$(".fun_shanchu").css("display","none");
			$(".fun_jiesuan").css("display","block");
			eaShuaxin()
			return false;
		});
	//	加减号
		$(".jia_up").click(function(){	
			$(this).parent(".jiajian").find(".oper").css("color","#282828");
			oNub=$(this).parent(".jiajian").find(".onub").val();	
			oNub--;	
			if(oNub<1){
				oNub=1;
				$(this).parent(".jiajian").find(".jia_up").css("color","#999999");
				var shopmony=$(this).parents("li").find(".shopPrice").text();
				var shopnub=$(this).parents("li").find(".onub").val();
				var shopAllmonye=parseFloat("0");
				var hejiNub=$("#shopNumber").text();
				var allNub=parseFloat(hejiNub)+parseInt(shopAllmonye);
			}else{
				if($(this).parents("li").find(".checkAll").is(':checked')){
					var shopmony=$(this).parents("li").find(".shopPrice").text();
					var shopnub=$(this).parents("li").find(".onub").val();
					var shopAllmonye=parseFloat(-shopmony);
					var hejiNub=$("#shopNumber").text();
					var allNub=parseFloat(hejiNub)+parseInt(shopAllmonye);
					$("#shopNumber").text(allNub);
				}
			}
			$(this).parent(".jiajian").find(".onub").val(oNub);
			return false;
		});
		$(".jian_next").click(function(){
			$(this).parent(".jiajian").find(".oper").css("color","#282828");
			oNub=$(this).parent(".jiajian").find(".onub").val();	
			oNub++;	
			if($(this).parents("li").find(".checkAll").is(':checked')){
					var shopmony=$(this).parents("li").find(".shopPrice").text();
					var shopnub=$(this).parents("li").find(".onub").val();
					var shopAllmonye=parseFloat(+shopmony);
					var hejiNub=$("#shopNumber").text();
					var allNub=parseFloat(hejiNub)+parseInt(shopAllmonye);
					$("#shopNumber").text(allNub);
				}
			$(this).parent(".jiajian").find(".onub").val(oNub);
			return false;
		})
		//全选
		var shopNumber=$("#shopNumber").text();
		$("#u_checkbox").click(function(){
			var oli=$(".sc_shangpin_wrap ").find("ul").find("li");
	//		selectAll();
			if($("#u_checkbox").is(':checked')){
				$(".checkAll").prop("checked",true);
				var sub=0;
				$.each(oli, function(n) {  
					var shopPret=$(".shopPrice").eq(n).text();
					var shopNub=$(".onub").eq(n).val();
					var shopAllmonye = parseFloat(shopPret*shopNub);
					sub += shopAllmonye;
				});
				$("#shopNumber").text(sub);
				
			}else{
				$(".checkAll").prop("checked",false);
				
				$("#shopNumber").text("0");
			}
		})
	//	单个选
		$(".sc_shangpin_wrap").find(".checkAll").click(function(){
			var shopmony=$(this).parents("li").find(".shopPrice").text();
			var shopnub=$(this).parents("li").find(".onub").val();
			var shopAllmonye=parseFloat(shopmony*shopnub);
			var hejiNub=$("#shopNumber").text();
			if($(this).is(':checked')){
				$(this).prop("checked",true);
				var allNub=parseFloat(hejiNub)+parseInt(shopAllmonye);
				eacher()
	 		}else{
				$("#u_checkbox").prop("checked",false);
				$(this).prop("checked",false);
				var allNub=parseFloat(hejiNub)-parseInt(shopAllmonye)
			}
			$("#shopNumber").text(allNub);
		});
	//	单选遍历是否全选
		function eacher(){
			var oli=$(".sc_shangpin_wrap ").find("ul").find(".checkAll");
			$.each(oli, function(n) {
				if($(this).is(':checked')==false){
					$("#u_checkbox").prop("checked",false);
					return false;
				}else{
					$("#u_checkbox").prop("checked",true);
				}
			});
		}
		
		})
//	删除弹框
	$(".fun_shanchu").click(function(){
			checknub();
	})
	
	//	遍历计算选中几个
		function checknub(){
			var ocheck=$(".sc_shangpin_wrap ").find("ul").find(".checkAll");
			var ochecknub=0;
			$.each(ocheck, function(n) {
				if($(this).is(':checked')==true){
					ochecknub++;
					$(".fun_model_wrap_al").css("display","block");
				}
			});
			$("#srModelNub").text(ochecknub);
		}
		$("#dele_shanchu").click(function(){
			$(".fun_model_wrap_al").css("display","none");
		});
		//每次编辑和完成切换都刷新所选按钮为空
		function eaShuaxin(){
			var oli=$(".sc_shangpin_wrap ").find("ul").find(".checkAll");
			$.each(oli, function(n) {
				if($(this).is(':checked')){
					$(this).prop("checked",false);
					$("#u_checkbox").prop("checked",false);
				}
			});
		}
</script>
</body>
</html>